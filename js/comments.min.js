$(document).ready(function(){var n=$("#mensaje"),e=$("#name"),o=$(".loader"),t=[],a=$("#commentsContainer"),c="http://localhost:8000/api/",i=0,r=function(){if(a.empty(),0==t&&1==i)a.append("<li>* No tienes comentarios</li>");else{for(var n="",e=0;e<t.length;e++)n+='<div id="li-name">'+t[e].name+'</div><li id="li-comment">'+t[e].comentario+'<button class="delete" data-comment-id="'+t[e].id+'">&times;</button></li>';a.append(n)}};r();var l=function(){var n=function(n){t=n,r()},e=function(){o.hide(),i=1,r()};$.ajax({type:"GET",url:c+"contact",success:n,complete:e}).fail(function(n){console.error("Error al cargar comentarios.",n)})},u=function(o,a){var i=function(o){console.log(o),n.val(""),e.val(""),t.push(o),r()},l={comentario:o,name:a},u=function(){alert("Mensaje enviado, gracias")};$.ajax({type:"POST",url:c+"contact",data:l,success:i,complete:u}).fail(function(n){console.error("Error al enviar comentario.",n)})},m=function(n){var e=function(e){t=$.grep(t,function(e){return e.id!=n}),r()};$.ajax({type:"DELETE",url:c+"contact/"+n,success:e}).fail(function(n){console.error("Error eliminando comentario",n)})};$("#sendNewComment").on("click",function(o){"  "!=n.val()&&(o.preventDefault(),u(n.val(),e.val()))}),$(document).on("click",".delete",function(n){var e=$(this).data("commentId");m(e)}),setTimeout(function(){l()},1500)});